<!-- Header -->
<header>
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 text-center">
        <img class="img-responsive img-fluid" src="img/profile.webp" alt="Lions Den CNX Logo" />
        <div class="intro-text">
          <span class="name">Lions Den CNX</span>
          <hr class="star-light" />
          <span class="skills">Train with us in Chiang Mai, Thailand.</span>
        </div>
        <div class="socialLinks">
          <a class="socialLinks__link" href="https://lin.ee/E7P1Tfz" target="_blank">Line Official</a>
          </div>
          <div class="facility-info">
            <div><strong>Hours:</strong> Open from 8am to 8pm</div>
            <div><strong>Facility:</strong> includes showers and changing room</div>
          </div>
          <div class="gallery-section">
            <div class="frame">
              <div class="gallery js-flickity">
                <!-- Gallery Cell 1 -->
                <div class="gallery-cell">
                  <img src="img/location/bars.webp" alt="Bars" class="gallery-image">
                </div>
                <!-- Gallery Cell 2 -->
                <div class="gallery-cell">
                  <img src="img/location/front_door.webp" alt="Front Door" class="gallery-image">
                </div>
                <!-- Gallery Cell 3 -->
                <div class="gallery-cell">
                  <img src="img/location/front_door2.webp" alt="Front Door 2" class="gallery-image">
                </div>
                <!-- Gallery Cell 4 -->
                <div class="gallery-cell">
                  <img src="img/location/locker_room.webp" alt="Locker Room" class="gallery-image">
                </div>
                <!-- Gallery Cell 5 -->
                <div class="gallery-cell">
                  <img src="img/location/powerrack.webp" alt="Powerrack" class="gallery-image">
                </div>
                <!-- Gallery Cell 6 -->
                <div class="gallery-cell">
                  <img src="img/location/showers.webp" alt="Showers" class="gallery-image">
                </div>
                <!-- Gallery Cell 7 -->
                <div class="gallery-cell">
                  <img src="img/location/deadlift_platform.webp" alt="Deadlift Platform" class="gallery-image">
                </div>
              </div>
            </div>
            </div>
            
            <!-- Map Section -->
            <div class="map-section">
              <h3>Location</h3>
              <div class="map-container">
                <img src="img/location/map.webp" alt="Map" class="mapImg">
                <p class="map-caption">Tap to zoom on mobile devices</p>
            </div>
          </div>
          </div>
          </div>
</header>
<script>
  var flky = new Flickity('.gallery', {
    // options, defaults listed

    accessibility: true,
    // enable keyboard navigation, pressing left & right keys

    adaptiveHeight: false,
    // set carousel height to the selected slide

    autoPlay: true,
    // advances to the next cell
    // if true, default is 3 seconds
    // or set time between advances in milliseconds
    // i.e. `autoPlay: 1000` will advance every 1 second

    cellAlign: 'center',
    // alignment of cells, 'center', 'left', or 'right'
    // or a decimal 0-1, 0 is beginning (left) of container, 1 is end (right)

    cellSelector: undefined,
    // specify selector for cell elements

    contain: false,
    // will contain cells to container
    // so no excess scroll at beginning or end
    // has no effect if wrapAround is enabled

    draggable: '>1',
    // enables dragging & flicking

    dragThreshold: 3,
    // number of pixels a user must scroll horizontally to start dragging
    // increase to allow more room for vertical scroll for touch devices

    freeScroll: false,
    // enables content to be freely scrolled and flicked
    // without aligning cells

    friction: 0.2,
    // smaller number = easier to flick farther

    groupCells: false,
    // group cells together in slides

    initialIndex: 0,
    // zero-based index of the initial selected cell

    lazyLoad: true,
    // enable lazy-loading images
    // set img data-flickity-lazyload="src.jpg"
    // set to number to load images adjacent cells

    percentPosition: true,
    // sets positioning in percent values, rather than pixels
    // Enable if items have percent widths
    // Disable if items have pixel widths, like images

    prevNextButtons: true,
    // creates and enables buttons to click to previous & next cells

    pageDots: true,
    // create and enable page dots

    resize: true,
    // listens to window resize events to adjust size & positions

    rightToLeft: false,
    // enables right-to-left layout

    setGallerySize: true,
    // sets the height of gallery
    // disable if gallery already has height set with CSS

    watchCSS: false,
    // watches the content of :after of the element
    // activates if #element:after { content: 'flickity' }

    wrapAround: false
    // at end of cells, wraps-around to first for infinite scrolling

  });

  // Map zoom functionality for mobile
  document.addEventListener('DOMContentLoaded', function () {
    const mapImg = document.querySelector('.mapImg');
    if (mapImg) {
      let isZoomed = false;

      mapImg.addEventListener('click', function () {
        if (window.innerWidth <= 1000) { // Only on mobile/tablet
          if (!isZoomed) {
            // Zoom in
            this.classList.add('zoomed');
            isZoomed = true;

            // Add overlay
            const overlay = document.createElement('div');
            overlay.style.cssText = `
              position: fixed;
              top: 0;
              left: 0;

              height: 100%;
              background: rgba(0, 0, 0, 0.8);
              z-index: 999;
              cursor: pointer;
            `;
            overlay.id = 'map-overlay';
            document.body.appendChild(overlay);

            // Close on overlay click
            overlay.addEventListener('click', function () {
              mapImg.classList.remove('zoomed');
              isZoomed = false;
              document.body.removeChild(overlay);
            });

            // Close on escape key
            document.addEventListener('keydown', function (e) {
              if (e.key === 'Escape' && isZoomed) {
                mapImg.classList.remove('zoomed');
                isZoomed = false;
                const overlay = document.getElementById('map-overlay');
                if (overlay) {
                  document.body.removeChild(overlay);
                }
              }
            });
          } else {
            // Zoom out - tap to minimize
            this.classList.remove('zoomed');
            isZoomed = false;
            const overlay = document.getElementById('map-overlay');
            if (overlay) {
              document.body.removeChild(overlay);
            }
          }
        }
      });
    }
  });

</script>